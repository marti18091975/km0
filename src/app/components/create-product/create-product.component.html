<div class="main">
    <div class="create-product__box">
        <div class="title__product">Nou producte</div>
        
          <form
            id="productForm"
            class="create-product__group"
            [formGroup]="productForm"
            (ngSubmit)="onSubmit()"
          >
          <div class="create-product__side">
            
              <div class="input__form">
                <label for="nom">Nom</label>
                <input type="text" name="nom" formControlName="name"  [(ngModel)]="product.name" />
              </div>
              <div class="input__form">
                <label for="subtitol">subtítol</label>
                <input type="text" name="subtitol" formControlName="subName" [(ngModel)]="product.subName"  />
              </div>
              <div class="input__form">
                <label for="descripcio">Descripció</label>
                <input type="text" name="descripcio" formControlName="description" [(ngModel)]="product.description"  />
              </div>
              <div class="input__form">
                <label for="preu">Preu</label>
                <input type="text" name="preu" required formControlName="price" [(ngModel)]="product.price" />
              </div>
              <div class="input__form"*ngIf="user">
                <h4>Productor: {{ user.name }}</h4>
              </div>
            
          </div>
          <div class="create-product__side">
             
            <div class="input__form">
              <label for="types">Classe</label>
              <select id="types" class="input__form--select" form="productForm" name="type" formControlName="type">
                <option value="fruites i verdures">fruites i verdures</option>            
                <option value="lactics">làctics</option>
                <option value="begudes">begudes</option>
                <option value="olis">olis</option>
                <option value="carns">carns</option>
                <option value="artesania">artesania</option>
                <option value="reposteria">reposteria</option>
                <option value="altres">altres</option>
              </select>
            </div>
              
              <form
                class="image__form"
                [formGroup]="prodImgForm"
                (ngSubmit)="prodImgUpload()"
                style="margin-top: 40px"
              >
                <div style="margin-bottom:10px">Imatge del producte</div>
                <div class="file">
                  <label class="file-label">
                  <input
                    class="file-input"
                    type="file"
                    name="resume"
                    formControlName="prodImg"
                    (change)="prodImgChange($event)"
                  />
                  </label>
                  <img class="imagecreate" *ngIf="URLPublic"src="{{ URLPublic }}" />
                  <img class="imagecreate" *ngIf="!URLPublic&&!product.urlImage" src="../../../assets/cesta.png" />
                  <img class="imagecreate" *ngIf="!URLPublic&&product.urlImage" src="{{product.urlImage}}" />
                  <hr />
                  <progress
                    *ngIf="percentage > 0 && percentage < 100"
                    class="progress is-large is-success"
                    value="{{ percentage }}"
                    max="100"
                  >
                    {{ percentage }}%
                  </progress>
                  <button
                    [ngClass]="{
                      button: true,
                      'is-success': true,
                      'is-large': true,
                      'is-loading': percentage > 0 && percentage < 100
                    }"
                    [disabled]="
                      !prodImgForm.valid && percentage > 0 && percentage < 100
                    "
                  >
                    pujar imatge
                  </button>
                  
                </div>
              </form>
            </div>
              <button type="submit" class="button__form">Enviar</button>
            </form>
          
    <a class="create-link"[routerLink]="['/mainBis']">Tornar</a>
  </div>
</div>
